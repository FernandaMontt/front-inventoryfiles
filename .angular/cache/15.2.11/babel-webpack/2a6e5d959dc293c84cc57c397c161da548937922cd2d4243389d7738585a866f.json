{"ast":null,"code":"import { __decorate, __param } from \"tslib\";\nimport { Component, Inject } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\nlet NewCategoryComponent = class NewCategoryComponent {\n  constructor(fb, categoryService, dialogRef, data) {\n    this.fb = fb;\n    this.categoryService = categoryService;\n    this.dialogRef = dialogRef;\n    this.data = data;\n    this.estadoFormulario = \"\";\n    console.log(data);\n    this.estadoFormulario = \"Agregar\";\n    this.categoryForm = this.fb.group({\n      name: ['', Validators.required],\n      descripcion: ['', Validators.required],\n      creador: ['', Validators.required],\n      fecha_actualizacion: ['', Validators.required],\n      version: ['', Validators.required]\n    });\n    if (data != null) {\n      this.updateForm(data);\n      this.estadoFormulario = \"Actualizar\";\n    }\n  }\n  ngOnInit() {}\n  onSave() {\n    let data = {\n      name: this.categoryForm.get('name')?.value,\n      descripcion: this.categoryForm.get('descripcion')?.value,\n      creador: this.categoryForm.get('creador')?.value,\n      fecha_actualizacion: this.categoryForm.get('fecha_actualizacion')?.value,\n      version: this.categoryForm.get('version')?.value\n    };\n    if (this.data != null) {\n      //update\n      this.categoryService.updateCategorie(data, this.data.id).subscribe(data => {\n        this.dialogRef.close(1);\n      }, error => {\n        this.dialogRef.close(2);\n      });\n    } else {\n      //create\n      this.categoryService.saveCategorie(data).subscribe(data => {\n        console.log(data);\n        this.dialogRef.close(1);\n      }, error => {\n        this.dialogRef.close(2);\n      });\n    }\n  }\n  onCancel() {\n    this.dialogRef.close(3);\n  }\n  updateForm(data) {\n    this.categoryForm = this.fb.group({\n      name: [data.name, Validators.required],\n      descripcion: [data.descripcion, Validators.required],\n      creador: [data.creador, Validators.required],\n      fecha_actualizacion: [data.fecha_actualizacion, Validators.required],\n      version: [data.version]\n    });\n  }\n};\nNewCategoryComponent = __decorate([Component({\n  selector: 'app-new-category',\n  templateUrl: './new-category.component.html',\n  styleUrls: ['./new-category.component.css']\n}), __param(3, Inject(MAT_DIALOG_DATA))], NewCategoryComponent);\nexport { NewCategoryComponent };","map":{"version":3,"mappings":"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","names":["Component","Inject","Validators","MAT_DIALOG_DATA","NewCategoryComponent","constructor","fb","categoryService","dialogRef","data","console","log","estadoFormulario","categoryForm","group","name","required","descripcion","creador","fecha_actualizacion","version","updateForm","ngOnInit","onSave","get","value","updateCategorie","id","subscribe","close","error","saveCategorie","onCancel","selector","templateUrl","styleUrls","__param"],"sourceRoot":"","sources":["D:\\Angular\\front-inventoryfiles\\src\\app\\modules\\category\\components\\new-category\\new-category.component.ts"],"sourcesContent":["import { Component, Inject, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\r\nimport { CategoryService } from 'src/app/modules/shared/services/category.service';\r\n\r\n@Component({\r\n  selector: 'app-new-category',\r\n  templateUrl: './new-category.component.html',\r\n  styleUrls: ['./new-category.component.css']\r\n})\r\nexport class NewCategoryComponent implements OnInit{\r\n\r\n  public categoryForm: FormGroup;\r\n  estadoFormulario: string = \"\";\r\n  constructor(private fb: FormBuilder, private categoryService: CategoryService,\r\n              private dialogRef: MatDialogRef<NewCategoryComponent>, \r\n              @Inject(MAT_DIALOG_DATA) public data: any){\r\n\r\n    console.log(data);\r\n    this.estadoFormulario = \"Agregar\";\r\n\r\n    this.categoryForm = this.fb.group({\r\n      name: ['', Validators.required],\r\n      descripcion: ['', Validators.required],\r\n      creador: ['', Validators.required],\r\n      fecha_actualizacion: ['', Validators.required],\r\n      version: ['', Validators.required]\r\n    });\r\n\r\n    if(data != null){\r\n      this.updateForm(data);\r\n      this.estadoFormulario = \"Actualizar\";\r\n    }\r\n  }\r\n\r\n  ngOnInit(): void {\r\n      \r\n  }\r\n\r\n  onSave(){\r\n\r\n    let data = {\r\n      name: this.categoryForm.get('name')?.value,\r\n      descripcion: this.categoryForm.get('descripcion')?.value,\r\n      creador: this.categoryForm.get('creador')?.value,\r\n      fecha_actualizacion: this.categoryForm.get('fecha_actualizacion')?.value,\r\n      version: this.categoryForm.get('version')?.value\r\n    }\r\n\r\n    if(this.data != null){\r\n      //update\r\n      this.categoryService.updateCategorie(data, this.data.id)\r\n        .subscribe((data:any) =>{\r\n          this.dialogRef.close(1);\r\n        }, (error:any) => {\r\n          this.dialogRef.close(2);\r\n        })\r\n    }else {\r\n      //create\r\n      this.categoryService.saveCategorie(data)\r\n        .subscribe((data:any) => {\r\n          console.log(data);\r\n          this.dialogRef.close(1);\r\n        }, (error:any) => {\r\n          this.dialogRef.close(2);\r\n        })\r\n\r\n    }\r\n  }\r\n\r\n  onCancel(){\r\n    this.dialogRef.close(3);\r\n  }\r\n\r\n  updateForm(data:any){\r\n    this.categoryForm = this.fb.group({\r\n      name: [data.name, Validators.required],\r\n      descripcion: [data.descripcion, Validators.required],\r\n      creador: [data.creador, Validators.required],\r\n      fecha_actualizacion: [data.fecha_actualizacion, Validators.required],\r\n      version: [data.version]\r\n    });\r\n  }\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}